% !TeX root = main.tex
\chapter{Experimental Methods supplementary}
\section{Longer QCM depositions}\label{long_qcm}
For larger mass loadings of the QCM, the linear approximation fails and the Z-match\texttrademark\ technique is used. This method, introduced by Lu and Lewis in 1972 on the basis of Miller and Bolefâ€™s theoretical treatment \cite{Miller1968,Lu1972}, incorporates the acoustic properties of both the quartz and the deposited film via the acoustic impedance ratio  

\begin{equation}
	Z = \left(\frac{d_q \, \mu_q}{d_f \, \mu_f}\right)^{1/2},
\end{equation}

with $d$ and $\mu$ denoting the density and shear modulus of quartz ($q$) and film ($f$), respectively \cite{SQM160_manual}. In practice, the controller applies a correction function $f(Z)$ to the Sauerbrey relation,  

\begin{equation}
	m_f = \frac{N_{\text{AT}} \, d_q \, \pi r^2}{F_q^2} \cdot \Delta F \cdot f(Z),
\end{equation}

which compensates for the acoustic mismatch and extends the validity of thickness determination up to $\sim 0.4 F_q$.\\ 

\section{Holder Assembly Design}
\label{sec:holder_assembly_figure}

The integrated holder assembly (Figure~\ref{fig:holder_assembly}) enabled simultaneous QCM and ion probe measurements with minimal spatial separation. The aluminum mount positioned both diagnostics as close as practicable to bring the flux and plasma conditions as close as possible between measurement locations.


\begin{figure}[ht]
	\centering
	\includemedia[
	width=0.8\linewidth,
	activate=pageopen,
	passcontext,
	3Dmenu,
	3Dcoo=4.639472961425781 -21.05224609375 27.223785400390625,
	3Dc2c=92.426 9.840 -436.780,
	3Droo=200,
	]{
		\includegraphics[width=0.8\linewidth]{Figures/experimental methods/mounting assembly thingy.png}
	}{Figures/experimental methods/fun try out(1).u3d}
	\caption[Holder Assembly for plasma diagnostics]{Holder Assembly for In-Situ Plasma Diagnostics: Integrated QCMs and Langmuir Ion Collector Probe (interactive 3D model; static preview shown in non-Adobe viewers).}
	\label{fig:holder_assembly}
\end{figure}

\section{Data Processing Workflow}\label{appendix:data_workflow}\label{appendix:data_processing}

Experimental data were processed using custom Python scripts to ensure consistency and reproducibility across all measurements. This section describes the data handling procedures and processing workflows used throughout this work.


\subsection{Data Organization and Logbook System}

A central Excel logbook served as the reference for all measurements, with each measurement identified by a unique suffix and linked to its corresponding data files. The logbook recorded:
\begin{itemize}[noitemsep]
	\item Date and time of measurement
	\item Spatial parameters: distance from macroparticle filter (10--20~cm)
	\item Gas parameters: N$_2$ flow rate (MFC setting in sccm), working pressure (Pa)
	\item Vacuum system parameters: cryopump gate valve position, base pressure
	\item Power supply settings: arc voltage and current, EM-coil voltage and current
	\item Pulse characteristics: frequency (Hz), pulse width (ms), number of pulses
	\item QCM frequencies: initial ($f_0$) and final ($f_1$) values for mass determination
\end{itemize}

Associated oscilloscope waveforms were stored as CSV files for ion current analysis, with filenames linked to the logbook suffix for traceability.

\subsection{Ion Current Data Processing}

Ion current waveforms were recorded using a Tektronix MSO64 oscilloscope. For each measurement condition, multiple pulses were recorded and processed as follows:

\begin{enumerate}
	\item \textbf{Pulse averaging}: Individual pulse waveforms were averaged to obtain the mean ion current waveform.
	\item \textbf{Time-integrated current}: The mean ion current over the pulse duration (0--1~ms) was calculated by integrating the averaged waveform and dividing by the pulse width.
\end{enumerate}

The Python script automatically matched logbook entries to oscilloscope CSV files and compiled all parameters into CSV files for analysis.

\subsection{ERMS Data Processing}

Energy-resolved mass spectrometry data were evaluated with a Python script that performed the following operations:

\begin{enumerate}
	\item \textbf{Spectral integration}: Raw energy distribution functions (EDFs) for each $M/Q$ value were averaged over the two measurement window of 20 ms.
	
	\item \textbf{Mass transmission correction}: Applied correction factors to account for mass-dependent detection efficiency of the quadrupole mass filter and detector.
	
	\item \textbf{Energy extraction}: For each ion species ($Q = 1^+, 2^+, 3^+, 4^+$), the measured $E/Q$ distributions were multiplied by $Q$ to obtain energy distributions in eV.
	
	\item \textbf{Statistical parameters}: Mean ion energy $\langle E \rangle$, standard deviation $\sigma_E$, and peak energy $E_{\text{peak}}$ were extracted for each charge state and species.
	
	\item \textbf{Charge state analysis}: Mean charge state $\langle Q \rangle$ was calculated as a weighted average:
	\begin{equation}
		\langle Q \rangle = \frac{\sum_Q Q \cdot I_Q}{\sum_Q I_Q}
		\label{eq:mean_charge_state}
	\end{equation}
	where $I_Q$ is the integrated ion current for charge state $Q$.
	
	\item \textbf{Energy decomposition}: Total ion energy was separated into kinetic and potential components following the procedure described in \cite{decoupling_kalanov_2025}.
\end{enumerate}
\begin{figure}
	\centering
	\includegraphics[width=0.7\linewidth]{Figures/appendix/14cm-0.25t-n-0.1pa_Ti}
	\caption[Charge-state-resolved ion energy distribution functions for Ti]{Charge-state-resolved ion energy distribution functions for Ti$^+$ through Ti$^{4+}$ measured at 14~cm distance with 0.25~T magnetic field and 0.1~Pa N$_2$ pressure. Mean kinetic energies and standard deviations are shown in the legend.}
	\label{fig:ERMS-appendix}
\end{figure}

\textcolor{red}{add another for N/N2 and for Al to show what the y are like in additional plots }

The processed results were visualized and exported to CSV files for correlation with ion probe and QCM measurements. Further example plot like \ref{fig:ERMS-appendix} can be found in \ref{sec:additional plots}

\subsection{QCM Data Processing}

QCM frequency measurements were recorded before and after each set of pulses. The deposited mass was calculated using the Sauerbrey equation (Equation~\ref{eq:sauerbrey}). The mass deposition rate was obtained by dividing by the number of pulses and the active crystal area.

\section{Uncertainty Analysis}\label{appendix:uncertainty}

This section provides detailed uncertainty analysis for each diagnostic technique, including sources of systematic and random errors, and error propagation through derived quantities.

\subsection{ERMS Measurements}

The non-stationary nature of cathode spots in cathodic arcs leads to significant fluctuations in ion flux and charge composition from pulse to pulse \cite{cathodic_arcs}. For ERMS measurements, the standard deviation $\sigma_E$ characterizes the pulse-to-pulse variability and is displayed as error bars in energy distribution plots. This statistical approach is well-documented in mass spectrometry literature \cite{basic_massspec}.\\

The ERMS requires optimization of electrode voltages to ensure stable ion transmission through the analyzer. This tuning process was performed using the cathodic arc plasma itself and optimized for N$_2^{+}$ ions at their peak energy.\\

The detection efficiency varies with $M/Q$ due to the transmission characteristics of the quadrupole mass filter and the detector response. Mass transmission correction factors were applied to account for these effects. The uncertainty in these correction factors is estimated at $\pm$10\%. The energy analyzer has a finite resolution $\Delta E/E \approx 2\%$ \cite{hiden_eqp_manual}, which limits the ability to resolve closely spaced peaks in the energy distribution but does not significantly affect the determination of mean energies.


\subsection{Ion Probe Measurements}

For ion current probe measurements, the standard deviation of the time-averaged current over the pulse duration characterizes the within-pulse variability. This variability can be attributed to fluctuations in plasma potential at pulse ignition and termination, charge-exchange reactions between ions and background neutral gas, and variations in arc current due to cathode spot dynamics. Figure~\ref{fig:ion_current_waveform_appendix} shows an example ion current waveform with typical within-pulse variations.

\begin{figure}[h]
	\centering
	\includegraphics[width=0.7\linewidth]{Figures/experimental methods/ion_probe_voltage}
	\caption[Example ion current waveform showing variability within a pulse]{Example ion current waveform showing variability within a pulse. The voltage signal measured across the 400~$\Omega$ resistor is proportional to the ion current. Rapid transients at pulse ignition (0~ms) and termination (1~ms) are excluded from the time-averaged current calculation.}
	\label{fig:ion_current_waveform_appendix}
\end{figure}

Pulse-to-pulse variability is examined in Section~\ref{sec:errorbar}. For most measurements, ion current waveforms were averaged over multiple pulses (typically 64 pulses) using the oscilloscope's averaging function to reduce noise. The reported uncertainty in these cases reflects within-pulse variability rather than pulse-to-pulse differences.

The ion collection area depends on the sheath thickness, which varies with bias voltage and plasma density. For a cylindrical probe of radius $r_p = 2.5$~mm biased at $V_b = -80$~V in a plasma with electron temperature $T_e \approx 5$~eV, the Debye length is estimated as:
\begin{equation}
	\lambda_D = \sqrt{\frac{\epsilon_0 k_B T_e}{e^2 n_e}} \approx 10^{-5}~\text{m}
\end{equation}
assuming $n_e \approx 10^{17}$~m$^{-3}$. Since $r_p \gg \lambda_D$, sheath expansion effects are negligible and the geometric probe area ($A = 0.196$~cm$^2$) is appropriate. Energetic ions striking the probe surface can induce secondary electron emission, which would reduce the measured ion current. For Cu surfaces bombarded by Ti and Al ions at energies of 30--80~eV, the secondary electron yield is typically $< 0.1$ \cite[Chap.~8.2]{cathodic_arcs}. The $-80$~V bias is sufficient to suppress these secondary electrons, so this effect is considered negligible.

The probe collection area (diameter 5~mm) is smaller than the QCM active area (diameter 7.5~mm), and both are positioned as close as possible to each other. However, radial plasma density gradients inherent to expanding cathodic arc plasmas \cite[Chap.~6.2]{cathodic_arcs} mean that the probe and QCM sample slightly different regions of the plasma. This effect is most significant at close distances (10~cm) and is discussed in the main text.

\subsection{QCM Measurements}

The INFICON SQM-160 controller has a frequency measurement uncertainty of $\Delta f = 0.03$~Hz according to manufacturer specifications \cite{SQM160_manual}. Using the Sauerbrey equation (Equation~\ref{eq:sauerbrey}), this corresponds to a mass uncertainty:
\begin{equation}
	\sigma_m = \frac{N_{\text{AT}} \rho_q \pi r^2}{F_q^2} \cdot \Delta f = 18.8146023 \times 10^{-9} \times 0.03 = 5.6 \times 10^{-10}~\text{g}
\end{equation}
For typical deposited masses in the range 100--1500~ng, this represents a relative uncertainty of 0.04--0.6\%, which is negligible compared to other sources of uncertainty.

The QCM is water-cooled to minimize temperature variations, which would cause frequency drift unrelated to mass deposition. The cooling water temperature was maintained at 20$\pm$1~$^\circ$C. Frequency measurements were recorded immediately before and after each deposition run (total time $<$ 1~minute) to minimize drift effects. The Sauerbrey equation assumes uniform mass loading across the entire crystal surface. In practice, the deposition profile depends on the plasma expansion geometry. The QCM controller applies no tooling factor correction ($T_F = 1.00$), which is appropriate for directional deposition from a distant source.

For TiAlN films with density $\rho_f \approx 4.5$~g\,cm$^{-3}$ deposited on quartz with $\rho_q = 2.649$~g\,cm$^{-3}$, small deviations from linearity are expected at larger mass loadings. However, all measurements were performed in the linear regime ($\Delta F \ll 0.05 F_q$), so Z-match corrections were not required (see Section~\ref{long_qcm}).

\subsection{Error Propagation in Derived Quantities}

The ion flux $\Gamma_{\text{ion}}$ (ions\,cm$^{-2}$\,s$^{-1}$) is calculated from the ion current density measured by the Langmuir probe:
\begin{equation}
	\Gamma_{\text{ion}} = \frac{J_i}{e \langle Q \rangle} = \frac{V_{\text{measured}}}{e \langle Q \rangle A_{\text{probe}} R}
	\label{eq:ion_flux_appendix}
\end{equation}

The primary sources of uncertainty are: ion current measurement ($\sigma_{V}/V \approx 5$--15\%), mean charge state determination ($\sigma_{\langle Q \rangle}/\langle Q \rangle \approx 5$--10\%), probe area ($\sigma_A/A \approx 1\%$), and measurement resistor ($\sigma_R/R \approx 0.5\%$). Assuming independent uncertainties, the standard Gaussian error propagation formula gives \cite{taylor1997}:
\begin{equation}
	\left(\frac{\sigma_{\Gamma_{\text{ion}}}}{\Gamma_{\text{ion}}}\right)^2 = \left(\frac{\sigma_V}{V}\right)^2 + \left(\frac{\sigma_{\langle Q \rangle}}{\langle Q \rangle}\right)^2 + \left(\frac{\sigma_A}{A}\right)^2 + \left(\frac{\sigma_R}{R}\right)^2
	\label{eq:ion_flux_error}
\end{equation}
The dominant contributions are from the current measurement and charge state determination, giving a total relative uncertainty of approximately 7--18\% depending on measurement conditions.

The total deposited flux $\Phi_{\text{total}}$ (atoms\,cm$^{-2}$\,pulse$^{-1}$) is derived from QCM measurements:
\begin{equation}
	\Phi_{\text{total}} = \frac{\Delta m \cdot N_A}{A_{\text{QCM}} \cdot N_{\text{pulses}} \cdot M_{\text{eff}}}
	\label{eq:total_flux_appendix}
\end{equation}

The primary sources of uncertainty are:
\begin{itemize}[noitemsep]
	\item \textbf{Mass measurement} ($\sigma_m/m \approx 0.5\%$): For typical deposited masses of 100--1500~ng over 64 pulses, the frequency shift ranges from 1--50~Hz. With the instrument uncertainty of $\Delta f = 0.03$~Hz \cite{SQM160_manual}, this gives a relative uncertainty of 0.06--3\%. However, temperature drift and baseline fluctuations typically add an additional 0.3--0.5\%, giving a combined uncertainty of approximately 0.5\% for most measurements. This is supported by repeated measurements at identical conditions showing mass reproducibility within 0.4--0.6\%.
	
	\item \textbf{QCM area} ($\sigma_{A_{\text{QCM}}}/A_{\text{QCM}} \approx 1\%$): The active crystal area is defined by the electrode diameter (7.5~mm). Manufacturer specifications for AT-cut crystals indicate electrode diameter tolerances of $\pm$0.05~mm \cite{SQM160_manual}, corresponding to 0.5\% uncertainty in diameter or approximately 1.2\% in area.
	
	\item \textbf{Effective molar mass} ($M_{\text{eff}}$): The effective molar mass depends on film composition determined by EDX. For metallic films (no nitrogen), the Ti:Al ratio was measured by EDX as approximately 4:1 (80~at.\% Ti, 20~at.\% Al), giving $M_{\text{eff}} = 46.2$~g\,mol$^{-1}$. This differs from the cathode composition (62.8~at.\% Ti, 37.2~at.\% Al, $M_{\text{eff}} = 44.2$~g\,mol$^{-1}$) due to differences in ionization efficiency and transport through the magnetic filter \cite{cathodic_arcs}. For reactive films, nitrogen content from EDX is added to determine $M_{\text{eff}}$ for the TiAlN compound.
	
	EDX quantification typically achieves 2--3\% relative accuracy for major elements (>10~at.\%) and 5--10\% for minor elements under optimal conditions \cite{goldstein2017}. However, quantitative uncertainty estimates (error bars) were not provided by the EDX analysis software for this work. Therefore, the uncertainty in $M_{\text{eff}}$ is not included in the error propagation calculations below, and the total flux uncertainties represent lower bounds. Given the exploratory nature of the measurements and the measurement variability from other sources, this simplified approach is considered adequate.
\end{itemize}

The error propagation for total deposited flux, excluding the unmeasured composition uncertainty, is:
\begin{equation}
	\left(\frac{\sigma_{\Phi_{\text{total}}}}{\Phi_{\text{total}}}\right)^2 = \left(\frac{\sigma_m}{m}\right)^2 + \left(\frac{\sigma_{A_{\text{QCM}}}}{A_{\text{QCM}}}\right)^2 \approx (0.005)^2 + (0.01)^2
	\label{eq:total_flux_error}
\end{equation}
yielding a total relative uncertainty of approximately 1.1\%. This represents a lower bound on the true uncertainty, as it does not include the contribution from composition measurement uncertainty (typically 2--5\% based on literature values for EDX). The actual uncertainty in $\Phi_{\text{total}}$ is likely in the range of 2--6\%, but cannot be precisely quantified without EDX uncertainty data.



The ratio $\Gamma_{\text{ion}}/\Phi_{\text{total}}$ provides insight into the fraction of deposited material arriving as ions versus neutrals, which is particularly important for distinguishing between metallic and reactive deposition modes. The relative uncertainty in this ratio, excluding composition uncertainty, is:
\begin{equation}
	\left(\frac{\sigma_{\text{ratio}}}{\text{ratio}}\right)^2 = \left(\frac{\sigma_{\Gamma_{\text{ion}}}}{\Gamma_{\text{ion}}}\right)^2 + \left(\frac{\sigma_{\Phi_{\text{total}}}}{\Phi_{\text{total}}}\right)^2 
	\label{eq:ratio_error}
\end{equation}
giving a total uncertainty of approximately 35--44\%, completely dominated by the ion flux measurement. The total deposited flux contributes negligibly to the overall uncertainty (<0.3\% additional uncertainty). 

This large uncertainty in the ion-to-total flux ratio is unavoidable given the fluctuating nature of cathodic arc plasmas. 



\chapter{Langmuir Probe Bias Voltage Characterization}\label{sec:bias_characterization}

Before plasma diagnostics were performed, the functionality of the custom-built Langmuir probe was verified by characterizing the voltage-current relationship and determining the appropriate negative bias voltage for ion saturation measurements. The goal was to ensure that the probe operates in a regime where the collected current is dominated by ions, excluding contributions from electrons.

\section{Validation of Langmuir Probe Operation}

The bias voltage tests were performed without nitrogen in the chamber, at a fixed distance of 10~cm from the macroparticle filter, and with an EM-coil strength of 0.25~T. 

The relationship between the collected current $I$ and the bias voltage $V$ was analyzed using the modified Langmuir equation \cite{chen1984introduction}:
\begin{align}\label{eq:langmuir_appendix}
	I = I_{\text{sat}} \left( 1 - e^{\frac{-V}{V_0}}\right) + m \cdot V
\end{align}
where $I_{\text{sat}}$ is the saturation current and $V_0$ is a characteristic voltage. The term $m$ accounts for plasma sheath expansion and collisional effects at higher bias voltages.

Figure~\ref{fig:bias_current_appendix} displays the measured ion current as a function of bias voltage. The blue data points represent the experimental results, while the green line shows the I-V fit to Equation~\ref{eq:langmuir_appendix}.

\begin{figure}[h]
	\centering
	\includegraphics[width=0.9\linewidth]{Figures/results 1/bias_current_voltage_Saturation_thesis_version.png}
	\caption[Langmuir probe biasing tests]{Measured ion current vs. bias voltage for the Langmuir probe, showing I-V fit $I=6.17(1-e^{-V/1.8})+0.023V$. Conditions: no nitrogen, 10~cm from the macroparticle filter, 0.25~T EM-coil strength.}
	\label{fig:bias_current_appendix}
\end{figure}

\section{Analysis of the Ion Saturation Curve}

As the bias voltage increases, the sheath around the probe grows. At higher voltages, the sheath becomes non-planar, and the probe begins to attract ions not only from directly in front but also from the sides, leading to a non-saturating component in the collected current. This is a common effect seen in small probes. Additionally, collisions within the sheath or presheath region can modify the ion trajectory, resulting in a small linear increase in the collected current with voltage. The linear term $m \cdot V$ in Equation~\ref{eq:langmuir_appendix} accounts for these effects and ensures the model accurately describes the probe's behavior across the full range of applied voltages \cite[Chap.~7]{chen1984introduction}.

The experimental data were fitted to Equation~\ref{eq:langmuir_appendix} using a nonlinear least-squares method in Python, yielding the following parameters:
\[ I_{\text{sat}} = 6.17 \, \text{mA}, \hspace{2cm} V_0 = 1.8 \, \text{V}, \hspace{2cm} m = 0.023. \]

The bias voltage test results (Figure~\ref{fig:bias_current_appendix}) show two distinct regimes:

\begin{enumerate}
	\item \textbf{Transition Regime (0 -- 40~V):} \\
	At low bias voltages, the probe collects both ions and electrons. As the negative bias increases, more electrons are repelled, reducing their contribution to the measured current. This results in a rapid rise in net current as the ion flux begins to dominate. The transition regime is characterized by a balance between the decreasing electron flux and the increasing ion flux.
	
	\item \textbf{Saturation Regime (40 -- 130~V):} \\
	Beyond approximately 40~V, the current plateaus, indicating that the probe has entered the ion saturation regime. At this point, the negative bias effectively repels all electrons, and the collected current is dominated by ions. However, the current increases slightly with voltage, which is captured by the linear correction term $m = 0.023$ in the modified Langmuir equation.
\end{enumerate}

\section{Selection of Operating Bias Voltage}

A bias voltage of $-80$~V was selected for subsequent measurements to ensure the probe operates well within the ion saturation regime. While the curve begins to saturate around 40~V, choosing a higher voltage provides confidence that the probe is fully repelling electrons and measuring ion flux reliably.

\section{Ion Current Variation over Different Pulses}\label{sec:errorbar}

To analyze the pulse-to-pulse variation, approximately 30 single pulses were recorded for each magnetic field strength. The average ion current of each pulse was calculated over the 0--1~ms pulse interval. The final mean and standard deviation were then determined by combining these averages, allowing for an assessment of the differences between pulses. 

\begin{figure}[h]
	\centering
	\includegraphics[width=0.75\textwidth]{"Figures/results 1/pulse_variability_plot_mean"}
	\caption[Pulse to pulse variation of mean ion current]{Pulse to pulse variation in mean ion current at varying magnetic fields (0.1~Pa N$_2$, 10~cm distance)}
	\label{fig:pulsevariabilityplotmean}
\end{figure}

\begin{table}[h]
	\centering
	\begin{tabular}{ccccc}
		\toprule
		\textbf{EM-coil field (T)} & \textbf{Mean $I_{\text{ion}}$ (mA)}  & \textbf{Std (\%)} & \textbf{Range (mA)} & \textbf{\# Pulses} \\ 
		\midrule
		0.00 & 1.931  & 13.8 & [1.13, 2.26] & 30 \\ 
		0.05 & 1.622  & 37.1 & [1.16, 4.85] & 32 \\ 
		0.10 & 4.279  & 12.7 & [2.72, 4.88] & 31 \\ 
		0.15 & 6.323  & 6.6 & [4.99, 6.92] & 27 \\ 
		0.20 & 7.996  & 5.0 & [7.26, 8.78] & 22 \\
		0.25 & 9.460  & 3.8 & [8.61, 10.02] & 30 \\ 
		\bottomrule
	\end{tabular}
	\caption[Summary of pulse measurement statistics]{Summary of pulse measurement statistics for varying magnetic field strengths. Note: The 0.05~T data includes variability from unstable arc behavior at this field strength.}
	\label{tab:pulse_measurements_appendix}
\end{table}

In all other measurements, the oscilloscope averaged the voltage signal over multiple pulses to improve signal-to-noise ratio. Therefore, the error reported in subsequent sections primarily reflects variations in ion current within individual pulses, rather than differences between distinct pulses.


\chapter{Additional Plots}\label{sec:additional plots}

\begin{figure}[h]
	\centering
	\includegraphics[width=\textwidth]{"Figures/appendix/Pulse waveform appendix (0.1T)"}
	\caption[Pulse waveform at 100 V input]{Additional Pulse waveform with the triggering timings (a) and (b) for the Arc-PSU and the EM-coil PSU marked with the orange dashed line for 100V input}
	\label{fig:pulse-waveform-appendix}
\end{figure}

\begin{figure}[h]
	\centering
	\begin{subfigure}{.5\textwidth}
		\centering
		\includegraphics[width=\linewidth]{Figures/appendix/Distance_vs_Pressure_B0.00T_Mass.png}
		\caption{}
	\end{subfigure}%
	\begin{subfigure}{.5\textwidth}
		\centering
		\includegraphics[width=\linewidth]{Figures/appendix/Distance_vs_Pressure_B0.00T_IonCurrent.png}
		\caption{}
	\end{subfigure}
	\caption[Additional distance measurements]{Additional plot for Section \ref{subsec:distance}. QCM and Ion Probe measurements showing (a) the deposited mass after 64 pulses and (b) the ion current averaged over a single pulse, each plotted as a function of distance. Data shown for representative pressures, with error bars representing variation within pulses.}
	\label{fig:distance_0T_mass/ion}
\end{figure}

\begin{figure}[h]
	\centering
	\includegraphics[width=\linewidth]{Figures/appendix/MagField_ChargeState_correlation.png}
	\caption[Magnetic field correlation with charge state]{Mean charge state as a function of magnetic field strength for Ti and Al ions under representative conditions: (a) 10 cm distance in metallic mode (0 Pa), (b) 10 cm distance in reactive mode (0.3 Pa), and (c) 14 cm distance in reactive mode (0.1 Pa). The systematic increase in charge states with magnetic field strength occurs across all conditions, demonstrating the inherent coupling between magnetic confinement and ion charge states. This coupling prevents independent control of ion flux and potential energy, as discussed in Section~\ref{chap:discussion}.}
	\label{fig:magfield_vs_chargestate}
\end{figure}


\chapter{Python Code and Data Overview}\label{appendix:code}

\section{Data Availability}
\begin{verbatim}
	use \href{URL}{link text} to generate the links below
\end{verbatim}
All raw data files, processed datasets, and analysis scripts are archived and available upon request. The main Python scripts used for data processing include:
\begin{itemize}[noitemsep]
	\item \texttt{process\_ion\_probe.py}: Ion current waveform analysis and averaging
	\item \texttt{process\_erms.py}: ERMS data integration, mass transmission correction, and energy extraction
	\item \texttt{process\_qcm.py}: QCM frequency analysis and mass calculation
	\item \texttt{compile\_dataset.py}: Unified dataset generation from logbook and raw data files
\end{itemize}

\begin{table}[htbp]
	\centering
	\caption[Complete overview of experimental measurements]{Complete overview of experimental measurements. All distance/field/pressure combinations not explicitly listed were measured with ion current probe and QCM only. In total: 252 Ion+QCM measurements, 17 ERMS measurements, 4 deposited films}
	\label{tab:comprehensive_measurements}
	\small
	\renewcommand{\arraystretch}{1.3}
	\resizebox{\textwidth}{!}{
	\begin{tabular}{@{}ccccccc@{}}
		\toprule
		Distance & Magnetic Field & Pressure & \multicolumn{3}{c}{Measurements Performed} & Film \\
		\cmidrule(lr){4-6}
		(cm) & (T) & (Pa) & Ion/QCM & Mass Spec & Ex-situ & ID \\
		\midrule
		\multicolumn{7}{l}{\textit{\textbf{Systematic parameter scan:}}} \\
		\makecell[l]{12, 16, 18} & \makecell[c]{0, 0.05, 0.1,\\0.15, 0.2, 0.25} & \makecell[c]{0, 0.025, 0.05, 0.075,\\0.1, 0.2, 0.3} & \checkmark & -- & -- & -- \\
		\midrule
		\multicolumn{7}{l}{\textit{\textbf{Distance 10 cm --- standard conditions:}}} \\
		10 & \makecell[c]{0.05, 0.1,\\0.2} & all pressures$^{\dagger}$ & \checkmark & -- & -- & -- \\
		10 & 0 & 0.025, 0.05, 0.075, 0.2 & \checkmark & -- & -- & -- \\
		10 & 0.15 & 0.025, 0.05, 0.075, 0.2 & \checkmark & -- & -- & -- \\
		10 & 0.25 & 0.025, 0.05, 0.075 & \checkmark & -- & -- & -- \\
		\midrule
		\multicolumn{7}{l}{\textit{\textbf{Distance 10 cm --- with mass spectrometry:}}} \\
		10 & 0, 0.15 & 0, 0.1, 0.3 & \checkmark & \checkmark & -- & --\\
		10 & 0.25 & 0 & \checkmark & \checkmark & \checkmark & 003 \\
		10 & 0.25 & 0.1 & \checkmark & \checkmark & \checkmark & 004 \\
		10 & 0.25 & 0.2 & \checkmark & \checkmark & -- & -- \\
		10 & 0.25 & 0.3 & \checkmark & \checkmark & \checkmark & 002 \\
		\midrule
		\multicolumn{7}{l}{\textit{\textbf{Distance 14 cm --- standard conditions:}}} \\
		14 & 0, 0.05, 0.1, 0.2 & all pressures$^{\dagger}$ & \checkmark & -- & -- & -- \\
		14 & 0.15 & \makecell[c]{0, 0.025, 0.05,\\0.075, 0.2, 0.3} & \checkmark & -- & -- & -- \\
		14 & 0.25 & 0.025, 0.05, 0.075, 0.2 & \checkmark & -- & -- & -- \\
		\midrule
		\multicolumn{7}{l}{\textit{\textbf{Distance 14 cm --- with mass spectrometry:}}} \\
		14 & 0.15 & 0.1 & \checkmark & \checkmark & -- & -- \\
		14 & 0.25 & 0 & \checkmark & \checkmark & \checkmark & 008/010 \\
		14 & 0.25 & 0.1 & \checkmark & \checkmark & \checkmark & 011/013 \\
		14 & 0.25 & 0.2 & \checkmark & \checkmark & \checkmark & 014 \\
		14 & 0.25 & 0.3 & \checkmark & \checkmark & \checkmark & 009/011 \\
		\midrule
		\multicolumn{7}{l}{\textit{\textbf{Distance 20 cm --- standard conditions:}}} \\
		20 & \makecell[c]{0, 0.05, 0.1,\\0.15, 0.2} & all pressures$^{\dagger}$ & \checkmark & -- & -- & -- \\
		20 & 0.25 & 0.025, 0.05, 0.075, 0.1, 0.2 & \checkmark & -- & -- & -- \\
		\midrule
		\multicolumn{7}{l}{\textit{\textbf{Distance 20 cm --- with mass spectrometry:}}} \\
		20 & 0.25 & 0, 0.3 & \checkmark & \checkmark & -- & -- \\
		\bottomrule
		\multicolumn{7}{l}{\footnotesize $^{\dagger}$all pressures = 0, 0.025, 0.05, 0.075, 0.1, 0.2, 0.3~Pa} \\
		\multicolumn{7}{l}{\footnotesize Ion/QCM: Ion current probe and quartz crystal microbalance measured at the same time} \\
		\multicolumn{7}{l}{\footnotesize Mass Spec: Energy-resolved mass spectrometry (ERMS)} \\
		\multicolumn{7}{l}{\footnotesize Ex-situ: XRD, SEM, EDX, profilometry characterization of deposited films} \\
	\end{tabular}
	}
\end{table}

